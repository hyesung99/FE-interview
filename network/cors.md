## CORS란 무엇인가요?

CORS(교차 출처 리소스 공유)는 브라우저의 동일 출처 정책(SOP)을 우회하여 웹 애플리케이션이 다른 출처(도메인, 프로토콜 또는 포트가 다른 위치)에 있는 리소스를 요청할 수 있게 하는 메커니즘이다.

## Q. SOP란 무엇인가요?

다른 출처의 리소스를 사용하는 것을 제한하는 보안 방식이다.
SOP는 악의적인 공격자가 사용자의 정보(ex.토큰)를 탈취해 서버에 요청을 보내 데이터를 탈취/훼손하는 것을 방지한다.

## Q. 출처를 어떻게 판단하나요?

Protocol, Host, Port를 기준으로 판단한다.

## Q. CORS는 어떻게 동작하나요?

클라이언트는 서버에 실제 요청을 보내기 전 preflight 요청을 보낸다.
preflight 요청은 실제 요청을 보내기 전에 서버가 요청을 받아들일 수 있는지 확인하는 요청이다.

preflight는 OPTIONS http 메소드를 사용하며, 서버는 이 요청에 대한 응답으로 허용된 메소드, 헤더, 시간 등을 응답한다.

만약 preflight의 대한 응답으로 허용된 메소드, 헤더, 시간 등이 있다면 클라이언트는 실제 요청을 보낸다.

응답이 없거나 허용되지 않는다면 클라이언트는 실제 요청을 보내지 않는다.

## Q. 그럼 실제 요청을 보내기 전 항상 preflight 요청을 보내나요?

요청을 할 때마다 preflight요청을 보낸다면 성능상의 문제가 발생할 수 있다.
따라서 브라우저는 preflight의 응답에 포함된 캐시시간동안 preflight 요청을 캐싱한다.

## Q. CORS 문제가 발생했을 때 어떻게 해결하나요?

백엔드 서버와 같은 출처를 가지는 프록시 서버를 사용하거나, 백엔드 서버에서 허용할 출처를 설정하여 해결할 수 있다.
